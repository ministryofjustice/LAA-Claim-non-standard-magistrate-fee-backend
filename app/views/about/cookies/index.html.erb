<% title 'Cookies' %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-three-quarters">
    <%= render partial: 'shared/flash_banner',
               locals: {
                 flash: { success: t(".settings_updated.#{flash['cookies_consent_updated']}") }
               } if flash['cookies_consent_updated'] %>

    <h1 class="govuk-heading-xl">Cookies</h1>

    <p class="govuk-body">The ‘<%= service_name %>’ service puts small files (known as ‘cookies’) onto your device to collect
      information about how you use the service.</p>

    <p class="govuk-body">You’ll normally see a message on the site before we set a cookie on your device.</p>

    <p class="govuk-body">Cookies are not used to identify you personally.</p>

    <p class="govuk-body">Find out
      <a class="govuk-link" rel="external" target="_blank" href="https://ico.org.uk/for-the-public/online/cookies">how
        to manage cookies</a> from the Information Commissioner’s Office.</p>

    <h2 class="govuk-heading-l">Essential cookies (strictly necessary)</h2>

    <p class="govuk-body">We use these cookies to remember your progress on this device and your cookie consent
      settings.</p>

    <table class="govuk-table">
      <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <th class="govuk-table__header">Name</th>
        <th class="govuk-table__header">Purpose</th>
        <th class="govuk-table__header">Expires</th>
      </tr>
      </thead>
      <tbody class="govuk-table__body">
      <tr class="govuk-table__row">
        <th class="govuk-table__header">
          _crm7restbackend_session
        </th>
        <td class="govuk-table__cell">
          Saves your current progress on this device and tracks inactivity periods
        </td>
        <td class="govuk-table__cell">
          When you close your browser
        </td>
      </tr>
      <tr class="govuk-table__row">
        <th class="govuk-table__header">
          <%= Rails.configuration.x.analytics.cookies_consent_name %>
        </th>
        <td class="govuk-table__cell">
          Saves your cookie consent settings
        </td>
        <td class="govuk-table__cell">
          After <%= Rails.configuration.x.analytics.cookies_consent_expiration.inspect %>
        </td>
      </tr>
      <tr class="govuk-table__row">
        <th class="govuk-table__header">
          <%= Rails.configuration.x.analytics.analytics_consent_name %>
        </th>
        <td class="govuk-table__cell">
          Saves your analytics consent settings
        </td>
        <td class="govuk-table__cell">
          After <%= Rails.configuration.x.analytics.analytics_consent_expiration.inspect %>
        </td>
      </tr>
      </tbody>
    </table>

    <h2 class="govuk-heading-l">Analytics cookies (optional)</h2>
    <p class="govuk-body">
      We use Google Analytics software to collect information about how you use this service. We do this to help make sure
      this service is meeting the needs of its users and to help us make improvements. Google Analytics stores information
      about:
    </p>

    <ul class="govuk-list govuk-list--bullet">
      <li>the pages you visit</li>
      <li>how long you spend on each page</li>
      <li>the device and browser you use</li>
      <li>what you click on while you’re visiting the site</li>
    </ul>

    <p class="govuk-body">We do not allow Google to use or share our analytics data.</p>

    <p class="govuk-body">We only set analytics cookies when:</p>
    <ul class="govuk-list govuk-list--bullet">
      <li>you’ve accepted them</li>
      <li>JavaScript is running in your browser</li>
    </ul>

    <p class="govuk-body"> If you choose not to run JavaScript we will only set essential cookies.</p>

    <h3 class="govuk-heading-m govuk-!-margin-top-8">
      Change your cookie settings
    </h3>

    <%= form_with model: @cookie, url: about_cookies_path, method: :post do |f| %>
      <%= f.govuk_collection_radio_buttons :analytics,
                                           [['true', t('cookie_settings.form.cookies_on')],
                                            ['false', t('cookie_settings.form.cookies_off')]], :first,
                                           :last,
                                           legend: { text: t('cookie_settings.form.heading') },
                                           hint: { text: t('cookie_settings.form.hint') } %>
      <%= f.govuk_submit(t('cookie_settings.form.save_changes')) %>
    <% end %>
  </div>
</div>