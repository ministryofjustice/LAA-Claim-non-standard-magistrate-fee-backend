<% title t('.page_title', app_type: local_assigns[:app_type]) %>

<%
  # hack to allow the back function here to be overwritten from the controller
  if local_assigns[:header]
    instance_exec(&local_assigns[:header])
  else
    step_header(path: :back)
  end
%>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-xl"><%=t('.heading', app_type: local_assigns[:app_type]) %></h1>

    <%= @pre_tasklist&.render %>

    <h2 class="govuk-heading-s govuk-!-margin-bottom-2">
      <%= t '.subheading' %>
    </h2>

    <p class="govuk-body govuk-!-margin-bottom-7">
      <%= t('.progress_counter', completed: @tasklist.completed.size, total: @tasklist.size) %>
    </p>

    <%= @tasklist.render %>

    <% if @application.is_a?(PriorAuthorityApplication) %>
      <%= link_button t('.back_to_applications.application'), prior_authority_applications_path, class: 'govuk-button--secondary' %>
    <% else %>
      <%= link_button t('.back_to_applications.claim'), applications_path, class: 'govuk-button--secondary' %>
    <% end %>
  </div>

  <div class="govuk-grid-column-one-third app-grid-column--sticky">
    <aside class="app-aside__bar--blue aside-task-list" role="complementary">
      <h3 class="govuk-heading-s govuk-!-margin-bottom-6">
        <%= t('.aside.title') %>
      </h3>
      <h3 class="govuk-heading-s govuk-!-margin-0">
        <%= t('.aside.ufn') %>
      </h3>
      <p class="govuk-body">
        <%= @application.ufn %>
      </p>
      <h3 class="govuk-heading-s govuk-!-margin-0">
        <%= t('.aside.reference') %>
      </h3>
      <p class="govuk-body">
        <%= @application.laa_reference %>
      </p>
      <% if @application.respond_to?(:prison_law) %>
        <h3 class="govuk-heading-s govuk-!-margin-0">
          <%= t('.aside.prison_law') %>
        </h3>
        <p class="govuk-body">
          <%= t("generic.#{@application.prison_law}") %>
        </p>
      <% end %>
    </aside>
  </div>
</div>
